# MSW Boilerplate

## frontend/src/mocks/handlers.ts
```typescript
import { http, HttpResponse } from 'msw'

export const handlers = [
  // 예시: GET /api/health
  http.get('/api/health', () => {
    return HttpResponse.json({ status: 'ok' })
  }),

  // 예시: GET /api/users
  http.get('/api/users', () => {
    return HttpResponse.json([
      { id: 1, name: 'John Doe', email: 'john@example.com' },
      { id: 2, name: 'Jane Doe', email: 'jane@example.com' },
    ])
  }),

  // 예시: POST /api/users
  http.post('/api/users', async ({ request }) => {
    const body = await request.json()
    return HttpResponse.json(
      { id: Date.now(), ...body },
      { status: 201 }
    )
  }),
]
```

## frontend/src/mocks/browser.ts
```typescript
import { setupWorker } from 'msw/browser'
import { handlers } from './handlers'

export const worker = setupWorker(...handlers)
```

## frontend/src/mocks/index.ts
```typescript
export async function initMocks() {
  if (import.meta.env.DEV) {
    const { worker } = await import('./browser')
    await worker.start({
      onUnhandledRequest: 'bypass',
    })
  }
}
```

## frontend/src/mocks/index.ts (disabled)
```typescript
// MSW가 비활성화된 상태입니다.
// Backend 없이 개발 시 아래 주석을 해제하세요.

export async function initMocks() {
  // if (import.meta.env.DEV) {
  //   const { worker } = await import('./browser')
  //   await worker.start({
  //     onUnhandledRequest: 'bypass',
  //   })
  // }
}
```

## frontend/src/mocks/index.ts (Next.js)
```typescript
export async function initMocks() {
  if (process.env.NODE_ENV === 'development') {
    const { worker } = await import('./browser')
    await worker.start({
      onUnhandledRequest: 'bypass',
    })
  }
}
```

## frontend/src/mocks/index.ts (Next.js, disabled)
```typescript
// MSW가 비활성화된 상태입니다.
// Backend 없이 개발 시 아래 주석을 해제하세요.

export async function initMocks() {
  // if (process.env.NODE_ENV === 'development') {
  //   const { worker } = await import('./browser')
  //   await worker.start({
  //     onUnhandledRequest: 'bypass',
  //   })
  // }
}
```

## frontend/src/main.tsx (React, MSW)
```tsx
import { createRoot } from 'react-dom/client'
import { App } from '@app/index'

async function bootstrap() {
  const { initMocks } = await import('./mocks')
  await initMocks()

  createRoot(document.getElementById('root')!).render(<App />)
}

bootstrap()
```

## frontend/src/main.tsx (React, MSW, disabled)
```tsx
import { createRoot } from 'react-dom/client'
import { App } from '@app/index'

// MSW가 비활성화된 상태입니다.
// Backend 없이 개발 시 아래 bootstrap 함수를 사용하세요.

// async function bootstrap() {
//   const { initMocks } = await import('./mocks')
//   await initMocks()
//   createRoot(document.getElementById('root')!).render(<App />)
// }
// bootstrap()

createRoot(document.getElementById('root')!).render(<App />)
```

## frontend/app/layout.tsx (Next.js, MSW)
```tsx
import type { Metadata } from 'next'
import { MSWProvider } from './providers/MSWProvider'
import '@shared/styles/global.css'

export const metadata: Metadata = {
  title: 'App',
  description: 'Generated by create next app',
}

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html lang="ko">
      <body className="min-h-screen antialiased">
        <MSWProvider>{children}</MSWProvider>
      </body>
    </html>
  )
}
```

## frontend/app/layout.tsx (Next.js, MSW, disabled)
```tsx
import type { Metadata } from 'next'
import { MSWProvider } from './providers/MSWProvider'
import '@shared/styles/global.css'

export const metadata: Metadata = {
  title: 'App',
  description: 'Generated by create next app',
}

// MSW가 비활성화된 상태입니다.
// Backend 없이 개발 시 MSWProvider.tsx의 주석을 해제하면 자동 활성화됩니다.

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html lang="ko">
      <body className="min-h-screen antialiased">
        <MSWProvider>{children}</MSWProvider>
      </body>
    </html>
  )
}
```

## frontend/app/providers/MSWProvider.tsx (Next.js, MSW)
```tsx
'use client'

import { useEffect, useState } from 'react'

export function MSWProvider({ children }: { children: React.ReactNode }) {
  const [isReady, setIsReady] = useState(false)

  useEffect(() => {
    async function init() {
      const { initMocks } = await import('@/src/mocks')
      await initMocks()
      setIsReady(true)
    }
    init()
  }, [])

  if (!isReady) {
    return null
  }

  return <>{children}</>
}
```

## frontend/app/providers/MSWProvider.tsx (Next.js, MSW, disabled)
```tsx
'use client'

// MSW가 비활성화된 상태입니다.
// Backend 없이 개발 시 아래 주석을 해제하세요.

// import { useEffect, useState } from 'react'
//
// export function MSWProvider({ children }: { children: React.ReactNode }) {
//   const [isReady, setIsReady] = useState(false)
//
//   useEffect(() => {
//     async function init() {
//       const { initMocks } = await import('@/src/mocks')
//       await initMocks()
//       setIsReady(true)
//     }
//     init()
//   }, [])
//
//   if (!isReady) {
//     return null
//   }
//
//   return <>{children}</>
// }

export function MSWProvider({ children }: { children: React.ReactNode }) {
  return <>{children}</>
}
```

